
<h1 class="sectionedit1" id="统一平台模板切图入门">统一平台模板切图入门</h1>
<div class="level1">
<div class="table sectionedit2"><table class="inline">
	<tr class="row0">
		
	</tr>
</table></div>
<!-- EDIT2 TABLE [47-48] --><!-- EDIT3 PLUGIN_WRAP_START [0-] --><div class="wrap_center wrap_round wrap_download plugin_wrap" style="width: 40%;">
<p>
 <a href="/pme/lib/exe/fetch.php?media=ued:template.rar" class="media mediafile mf_rar" title="ued:template.rar (3.5 MB)">点此下载：下载最新的切图模板DEMO</a><br/>
更新时间：2015.12.17
</p>
</div><!-- EDIT4 PLUGIN_WRAP_END [0-] --><div class="table sectionedit5"><table class="inline">
	<tr class="row0">
		
	</tr>
</table></div>
<!-- EDIT5 TABLE [191-192] -->
</div>
<!-- EDIT1 SECTION "统一平台模板切图入门" [1-193] -->
<h2 class="sectionedit6" id="no静态切图_升级你的作品">NO静态切图！升级你的作品~</h2>
<div class="level2">

<p>
统一平台的“切图”与“套页面”工作是同步进行的，去除切图人员与套页面人员的沟通环节，缩短工期。
</p>

<p>
统一平台的模板前端开发可在切图过程中调用统一平台数据，
使用标签语法时可同时实现与切静态页面类似的“<a href="#实时预览标签语法" title="ued:template:guide ↵" class="wikilink1">实时预览</a>”。
</p>

<p>
如：
</p>
<pre class="code html4strict">{foreach item=article from=$list}
<span class="sc2">&lt;<a target="_blank" href="http://december.com/html/4/element/li.html"><span class="kw2">li</span></a> <span class="kw3">class</span><span class="sy0">=</span><span class="st0">&quot;fl&quot;</span>&gt;</span>{$article.title}<span class="sc2">&lt;<span class="sy0">/</span><a target="_blank" href="http://december.com/html/4/element/li.html"><span class="kw2">li</span></a>&gt;</span>
{/foreach}</pre>

<p>
即可得到，以下预览列表
</p>
<pre class="code html4strict"><span class="sc2">&lt;<a target="_blank" href="http://december.com/html/4/element/li.html"><span class="kw2">li</span></a>&gt;</span>这是一篇测试文章<span class="sc2">&lt;<span class="sy0">/</span><a target="_blank" href="http://december.com/html/4/element/li.html"><span class="kw2">li</span></a>&gt;</span>
<span class="sc2">&lt;<a target="_blank" href="http://december.com/html/4/element/li.html"><span class="kw2">li</span></a>&gt;</span>这是一篇测试文章<span class="sc2">&lt;<span class="sy0">/</span><a target="_blank" href="http://december.com/html/4/element/li.html"><span class="kw2">li</span></a>&gt;</span>
<span class="sc2">&lt;<a target="_blank" href="http://december.com/html/4/element/li.html"><span class="kw2">li</span></a>&gt;</span>这是一篇测试文章<span class="sc2">&lt;<span class="sy0">/</span><a target="_blank" href="http://december.com/html/4/element/li.html"><span class="kw2">li</span></a>&gt;</span></pre>

<p>
那么问题来了，这种“全变量”的模板页面如何看到效果？
</p>

</div>
<!-- EDIT6 SECTION "NO静态切图！升级你的作品~" [194-930] -->
<h2 class="sectionedit7" id="如此简单操作_即可实时预览">如此简单操作 即可实时预览</h2>
<div class="level2">

</div>
<!-- EDIT7 SECTION "如此简单操作 即可实时预览" [931-981] -->
<h3 class="sectionedit8" id="引入jsmarty引擎">1.引入jSmarty引擎</h3>
<div class="level3">

<p>
模板开发完成后可利用PHP的<a href="#实时预览标签语法" title="ued:template:guide ↵" class="wikilink1">Smarty引擎</a>来替换模板动态数据；
</p>

<p>
那么问题来了，如果在模板开发过程中 要如何实时预览切图效果，并且展现动态数据？
</p>

<p>
需在每个HTML文件头部引入一句JS，来模拟PHP的Smarty引擎：
</p>
<pre class="code html4strict"><span class="sc2">&lt;<a target="_blank" href="http://december.com/html/4/element/head.html"><span class="kw2">head</span></a>&gt;</span>
	<span class="sc2">&lt;<a target="_blank" href="http://december.com/html/4/element/script.html"><span class="kw2">script</span></a> <span class="kw3">type</span><span class="sy0">=</span><span class="st0">&quot;text/javascript&quot;</span> <span class="kw3">src</span><span class="sy0">=</span><span class="st0">&quot;http://chanpin.xm12t.com.cn/js/preview.js&quot;</span>&gt;&lt;<span class="sy0">/</span><a target="_blank" href="http://december.com/html/4/element/script.html"><span class="kw2">script</span></a>&gt;</span>
	...</pre>

</div>
<!-- EDIT8 SECTION "1.引入jSmarty引擎" [982-1440] -->
<h3 class="sectionedit9" id="开启实时预览">2.开启实时预览</h3>
<div class="level3">

</div>

<h4 id="方法一">方法一</h4>
<div class="level4">

<p>
编辑Chrome的快捷方式→右键“属性”，在“目标”地址最后加上<code> --allow-file-access-from-files</code>（需重启Chrome，用此快捷方式启动），如：
</p>
<pre class="code">&quot;C:\Program Files (x86)\Google\Chrome\Application\chrome.exe&quot; --allow-file-access-from-files</pre>

<p>
或本地搭建http服务器环境调试。
</p>

</div>

<h4 id="方法二">方法二</h4>
<div class="level4">

<p>
需搭建http服务器，把模板文件放入www目录，通过访问 <code><a href="http://localhost/" class="urlextern" target="_blank" title="http://localhost/"  rel="nofollow">http://localhost/</a>模板目录</code> 来访问预览！
</p>

</div>
<!-- EDIT9 SECTION "2.开启实时预览" [1441-1983] -->
<h2 class="sectionedit10" id="smarty标签语法">Smarty标签语法</h2>
<div class="level2">

<p>
统一平台的模板采用Smarty国际化引擎，语法通熟易懂。
</p>

<p>
输出<strong>文本类型</strong>变量：
</p>
<pre class="code html4strict">{$title}</pre>

<p>
输出<strong>数组类型</strong>变量（嵌套循环与限制循环次数）：
</p>

<p>
比如看到如下变量说明
</p>
<ul>
<li class="level1"><div class="li"> {$navs[0].name} 导航名</div>
</li>
<li class="level1"><div class="li"> {$navs[0].link} 导航链接</div>
</li>
<li class="level1"><div class="li"> {$navs[0].childmenu[]} 子导航，结构类似导航</div>
</li>
<li class="level1"><div class="li"> {$navs[0].childmenu[0].name} 子导航名</div>
</li>
<li class="level1"><div class="li"> {$navs[0].childmenu[0].link} 子导航链接</div>
</li>
</ul>

<p>
from数据源名称，item别名，key为遍历次数，name标识。根据具体数据键值，引用数据如：$navs.name。子键值数据为数组可以再次进行遍历，方式一样，from数据源由$navs改为$navs.data。
</p>
<pre class="code html4strict">{foreach item=nav from=$navs}
<span class="sc2">&lt;<a target="_blank" href="http://december.com/html/4/element/li.html"><span class="kw2">li</span></a> <span class="kw3">class</span><span class="sy0">=</span><span class="st0">&quot;fl&quot;</span>&gt;</span>{$nav.name}
	{if $nav.childmenu}
	{foreach item=nav_list from=$nav.childmenu}
	<span class="sc2">&lt;<a target="_blank" href="http://december.com/html/4/element/ul.html"><span class="kw2">ul</span></a> <span class="kw3">class</span><span class="sy0">=</span><span class="st0">&quot;clearfix&quot;</span>&gt;</span>
		<span class="sc2">&lt;<a target="_blank" href="http://december.com/html/4/element/li.html"><span class="kw2">li</span></a>&gt;</span>{$nav_list.name}<span class="sc2">&lt;<span class="sy0">/</span><a target="_blank" href="http://december.com/html/4/element/li.html"><span class="kw2">li</span></a>&gt;</span>
	<span class="sc2">&lt;<span class="sy0">/</span><a target="_blank" href="http://december.com/html/4/element/ul.html"><span class="kw2">ul</span></a>&gt;</span>
	{/foreach}
	{/if}
<span class="sc2">&lt;<span class="sy0">/</span><a target="_blank" href="http://december.com/html/4/element/li.html"><span class="kw2">li</span></a>&gt;</span>
{if $nav@index+1 == 5}{break}{/if}
{/foreach}</pre>

<p>
更多Smarty语法请参见：<a href="http://www.yiibai.com/smarty/smarty_ifelseif.html" class="urlextern" target="_blank" title="http://www.yiibai.com/smarty/smarty_ifelseif.html"  rel="nofollow">http://www.yiibai.com/smarty/smarty_ifelseif.html</a>
</p>

</div>
<!-- EDIT10 SECTION "Smarty标签语法" [1984-3056] -->
<h2 class="sectionedit11" id="可调用数据变量">可调用数据变量</h2>
<div class="level2">

<p>
查阅变量请跳转至<a href="#模板文件列表" title="ued:template:guide ↵" class="wikilink1">模板文件列表</a>点击对应文件名称，进入查阅！
</p>

<p>
或点击此处<a href="/pme/doku.php?id=ued:template:global" class="wikilink1" title="ued:template:global">查阅公共变量</a>。
</p>

</div>
<!-- EDIT11 SECTION "可调用数据变量" [3057-3263] -->
<h3 class="sectionedit12" id="模板中必备变量">模板中必备变量</h3>
<div class="level3">

<p>
为保证模板功能的完整性，以下变量必须在模板中出现（点击列表可查看引用位置与方法）：
</p>
<ul>
<li class="level1"><div class="li"> <a href="/pme/doku.php?id=ued:template:index#title_页面标题" class="wikilink1" title="ued:template:index">{$title}</a></div>
</li>
<li class="level1"><div class="li"> <a href="/pme/doku.php?id=ued:template:index#keywords_页面关键词" class="wikilink1" title="ued:template:index">{$keywords}</a></div>
</li>
<li class="level1"><div class="li"> <a href="/pme/doku.php?id=ued:template:index#description_页面描述" class="wikilink1" title="ued:template:index">{$description}</a></div>
</li>
<li class="level1"><div class="li"> <a href="/pme/doku.php?id=ued:template:index#site_another_url_网站另一域名地址" class="wikilink1" title="ued:template:index">{$site_another_url}</a></div>
</li>
<li class="level1"><div class="li"> <a href="/pme/doku.php?id=ued:template:header#logo_网站logo" class="wikilink1" title="ued:template:header">{$logo}</a></div>
</li>
<li class="level1"><div class="li"> <a href="/pme/doku.php?id=ued:template:footer#footprint_底部版权" class="wikilink1" title="ued:template:footer">{$footprint}</a></div>
</li>
<li class="level1"><div class="li"> <a href="/pme/doku.php?id=ued:template:index#headscript_头部脚本" class="wikilink1" title="ued:template:index">{$headscript}</a></div>
</li>
<li class="level1"><div class="li"> <a href="/pme/doku.php?id=ued:template:footer#footscript_底部脚本" class="wikilink1" title="ued:template:footer">{$footscript}</a></div>
</li>
</ul>

</div>
<!-- EDIT12 SECTION "模板中必备变量" [3264-3944] -->
<h2 class="sectionedit13" id="模板js_css引用">模板JS、CSS引用</h2>
<div class="level2">

<p>
所有的静态文件引用都需要加入{$site_url}变量，如
</p>
<pre class="code html4strict">...
	<span class="sc2">&lt;<a target="_blank" href="http://december.com/html/4/element/link.html"><span class="kw2">link</span></a> <span class="kw3">rel</span><span class="sy0">=</span><span class="st0">&quot;stylesheet&quot;</span> <span class="kw3">rev</span><span class="sy0">=</span><span class="st0">&quot;stylesheet&quot;</span> <span class="kw3">href</span><span class="sy0">=</span><span class="st0">&quot;{$site_url}css/style_{$stylecolor}.css&quot;</span> <span class="kw3">type</span><span class="sy0">=</span><span class="st0">&quot;text/css&quot;</span> <span class="sy0">/</span>&gt;</span>
	<span class="sc2">&lt;<a target="_blank" href="http://december.com/html/4/element/script.html"><span class="kw2">script</span></a> <span class="kw3">type</span><span class="sy0">=</span><span class="st0">&quot;text/javascript&quot;</span> <span class="kw3">src</span><span class="sy0">=</span><span class="st0">&quot;{$site_url}js/script.js&quot;</span>&gt;&lt;<span class="sy0">/</span><a target="_blank" href="http://december.com/html/4/element/script.html"><span class="kw2">script</span></a>&gt;</span>
<span class="sc2">&lt;<span class="sy0">/</span><a target="_blank" href="http://december.com/html/4/element/head.html"><span class="kw2">head</span></a>&gt;</span>
<span class="sc2">&lt;<a target="_blank" href="http://december.com/html/4/element/body.html"><span class="kw2">body</span></a>&gt;</span>
	<span class="sc2">&lt;<a target="_blank" href="http://december.com/html/4/element/img.html"><span class="kw2">img</span></a> <span class="kw3">src</span><span class="sy0">=</span><span class="st0">&quot;{$site_url}image/top.jpg&quot;</span> <span class="sy0">/</span>&gt;</span>
...</pre>

<p>
<em class="u">但在CSS文件中引入图片无需使用{$site_url}</em>
</p>

<p>
<strong><em class="u">注意：</em>html文件中不要出现如下JS运行代码：</strong>
</p>
<pre class="code html4strict"><span class="sc2">&lt;<a target="_blank" href="http://december.com/html/4/element/script.html"><span class="kw2">script</span></a> <span class="kw3">type</span><span class="sy0">=</span><span class="st0">&quot;text/javascript&quot;</span>&gt;</span>
	...
<span class="sc2">&lt;<span class="sy0">/</span><a target="_blank" href="http://december.com/html/4/element/script.html"><span class="kw2">script</span></a>&gt;</span></pre>

<p>
<em class="u">所有JS写入.js文件中引入！！</em>
这是基本规范和要求！
</p>

</div>
<!-- EDIT13 SECTION "模板JS、CSS引用" [3945-4575] -->
<h3 class="sectionedit14" id="css全局公共库">CSS全局公共库</h3>
<div class="level3">

<p>
建议引入css全局库，内附css reset与一些常用css封装：
</p>
<pre class="code html4strict"><span class="sc2">&lt;<a target="_blank" href="http://december.com/html/4/element/link.html"><span class="kw2">link</span></a> <span class="kw3">rel</span><span class="sy0">=</span><span class="st0">&quot;stylesheet&quot;</span> <span class="kw3">rev</span><span class="sy0">=</span><span class="st0">&quot;stylesheet&quot;</span> <span class="kw3">href</span><span class="sy0">=</span><span class="st0">&quot;http://chanpin.xm12t.com.cn/css/global.css&quot;</span> <span class="kw3">type</span><span class="sy0">=</span><span class="st0">&quot;text/css&quot;</span> <span class="sy0">/</span>&gt;</span></pre>

<p>
更多说明，点击这里链接《<a href="/pme/doku.php?id=ued:resource:global" class="wikilink1" title="ued:resource:global">global.css</a>》
</p>
<div class="table sectionedit15"><table class="inline">
	<tr class="row0">
		
	</tr>
</table></div>
<!-- EDIT15 TABLE [4881-4882] -->
</div>
<!-- EDIT14 SECTION "CSS全局公共库" [4576-4883] -->
<h2 class="sectionedit16" id="如何修改示例数据">如何修改示例数据</h2>
<div class="level2">

</div>
<!-- EDIT16 SECTION "如何修改示例数据" [4884-4921] -->
<h3 class="sectionedit17" id="可视化修改">可视化修改</h3>
<div class="level3">

<p>
对于全局生效的变量，建议使用config.ini配置文件修改方式：<a href="#方法一_编辑configini文件_推荐" title="ued:template:guide ↵" class="wikilink1">参见 方法一：编辑config.ini文件</a>
</p>

<p>
简单可视化的修改方法，仅需在地址栏后加上 <code>?database</code> 即可！例如：
</p>
<pre class="code">file:///E:/Desktop/demo/index.html?database</pre>

</div>
<!-- EDIT17 SECTION "可视化修改" [4922-5266] -->
<h3 class="sectionedit18" id="针对性修改">针对性修改</h3>
<div class="level3">
<!-- EDIT19 PLUGIN_WRAP_START [0-] --><div class="wrap_center wrap_round wrap_download plugin_wrap" style="width: 30%;">
<p>
<a href="/pme/lib/exe/fetch.php?media=ued:sample.rar" class="media mediafile mf_rar" title="ued:sample.rar (2.8 MB)">点此下载：如何利用preview.js展现示例数据</a>
</p>
</div><!-- EDIT20 PLUGIN_WRAP_END [0-] -->
<p>
模板变量中有两类变量，一类是<em class="u">系统变量</em>，另一类是<em class="u">模板变量</em>。
</p>

<p>
两者的修改方式不同！
</p>

</div>

<h4 id="模板变量">模板变量</h4>
<div class="level4">

<p>
模板变量定义于<em class="u">xxx.json</em>文件。
作用是定义一个可让客户随意修改的数据。
</p>

<p>
如index.json文件中的变量引用方式为<code>$index.xxx</code>，详见《<a href="/pme/doku.php?id=ued:template:index#index_首页数据_自定义于indexjson文件中" class="wikilink1" title="ued:template:index">统一平台模板Demo与Smarty变量：{$index} </a>》
</p>

<p>
修改方式则是直接修改<em class="u">xxx.json</em>文件中对应变量的<strong>value</strong>值！（除<a href="/pme/doku.php?id=ued:template:json#typelist" class="wikilink1" title="ued:template:json">类型type为list</a>的变量）
</p>

</div>

<h4 id="系统变量">系统变量</h4>
<div class="level4">

<p>
系统变量是调用系统中的一些数据，如网站标题、导航栏目、文章数据等。
</p>

<p>
模板开发过程中提供的示例数据比较单一。
</p>

<p>
若想修改，使得模板更加美观，其方式如下：
</p>

</div>

<h5 id="方法一_编辑configini文件_推荐">方法一：编辑config.ini文件（推荐）</h5>
<div class="level5">

<p>
只需在<a href="/pme/doku.php?id=ued:template:config#debug_调试内容" class="wikilink1" title="ued:template:config">config.ini</a>文件中的debug调试模块中做好对应配置，<br/>

具体配置方法参见：《<a href="/pme/doku.php?id=ued:template:config#debug_调试内容" class="wikilink1" title="ued:template:config">config.ini调试内容</a>》
</p>

<p>
<em class="u">注意：此方法修改的变量对全局所有页面生效！</em>
</p>

</div>

<h5 id="方法二_每个页面头部添加强制修改代码">方法二：每个页面头部添加强制修改代码</h5>
<div class="level5">

<p>
<em class="u">注意：此方法修改的变量只针对修改页面生效！</em>
</p>

<p>
<strong>字符串变量：</strong>
</p>

<p>
如<code>$stylecolor</code>变量常用于添加对应颜色风格样式表：<code>&lt;link href=“{$site_url}css/style_{$stylecolor}.css” type=“text/css” /&gt;</code>
</p>

<p>
系统默认输出<code>blue</code>，
若想在调试的时候调试其他颜色风格的css，则可如下操作：
</p>
<pre class="code html4strict"><span class="sc-1">&lt;!-- 实时预览调试代码，模板开发完成后删除 --&gt;</span>
<span class="sc-1">&lt;!-- {$stylecolor = 'red'} --&gt;</span>
<span class="sc2">&lt;<a target="_blank" href="http://december.com/html/4/element/script.html"><span class="kw2">script</span></a> <span class="kw3">type</span><span class="sy0">=</span><span class="st0">&quot;text/javascript&quot;</span> <span class="kw3">src</span><span class="sy0">=</span><span class="st0">&quot;http://chanpin.xm12t.com.cn/js/preview.js&quot;</span> data-jsonfile<span class="sy0">=</span><span class="st0">&quot;index.json&quot;</span>&gt;&lt;<span class="sy0">/</span><a target="_blank" href="http://december.com/html/4/element/script.html"><span class="kw2">script</span></a>&gt;</span>
<span class="sc-1">&lt;!-- 调试代码 End --&gt;</span></pre>

<p>
仅需在头部加入<code>&lt;!– {$stylecolor = &#039;red&#039;} –&gt;</code>，即可将当前调试风格样式改为红色版本！
</p>

<p>
<strong>数组变量：</strong>
</p>

<p>
<code>$index.lastest</code>是定义御<em class="u">index.json</em>中的一个类型为<em class="u">list</em>的变量。
将会自动输出栏目下的最新文章数据。
</p>

<p>
<strong>单个指定修改：</strong>
但是输出的数据全都是一样的，若我想修改成每条都不一样，可如下操作：
</p>
<pre class="code html4strict"><span class="sc-1">&lt;!-- 实时预览调试代码，模板开发完成后删除 --&gt;</span>
<span class="sc-1">&lt;!-- {$index.lastest.data[&quot;0&quot;].title = '大屏大法好，第四季度智能手机出货量苹果平了三星'} --&gt;</span>
<span class="sc-1">&lt;!-- {$index.lastest.data[&quot;0&quot;].description = '小米迅速增长的‘黄金时期’已经结束。联想/摩托罗拉和苹果迅速提升了自己在中国及全球市场的表现，他们开始蚕食小米的市场份额。而苹果...'} --&gt;</span>
<span class="sc-1">&lt;!-- {$index.lastest.data[&quot;1&quot;].title = '三菱电机推出最新MV4800线切割放电加工机床'} --&gt;</span>
<span class="sc-1">&lt;!-- {$index.lastest.data[&quot;1&quot;].description = 'MV4800线切割放电加工机床是三菱电机专门为加工各种大型模具、厚板型模具推出的高精度线切割放电加工机床，适用于汽车、电子以及航空、航天等各领域的中大型精密模具的加工。'} --&gt;</span>
<span class="sc2">&lt;<a target="_blank" href="http://december.com/html/4/element/script.html"><span class="kw2">script</span></a> <span class="kw3">type</span><span class="sy0">=</span><span class="st0">&quot;text/javascript&quot;</span> <span class="kw3">src</span><span class="sy0">=</span><span class="st0">&quot;http://chanpin.xm12t.com.cn/js/preview.js&quot;</span> data-jsonfile<span class="sy0">=</span><span class="st0">&quot;index.json&quot;</span>&gt;&lt;<span class="sy0">/</span><a target="_blank" href="http://december.com/html/4/element/script.html"><span class="kw2">script</span></a>&gt;</span>
<span class="sc-1">&lt;!-- 调试代码 End --&gt;</span></pre>

<p>
<strong>批量修改：</strong>
若想批量把示例的图片都更换成更漂亮的一张图，可如下操作：
</p>
<pre class="code html4strict"><span class="sc-1">&lt;!-- 实时预览调试代码，模板开发完成后删除 --&gt;</span>
<span class="sc-1">&lt;!-- {foreach item=article from=$index.lastest.data}</span>
<span class="sc-1">	{$article.image = 'http://imgs.meimeinice.com/imgs/3f76a397fec366ebc312cacdf41eb513.jpg!big'}</span>
<span class="sc-1">{/foreach} --&gt;</span>
<span class="sc2">&lt;<a target="_blank" href="http://december.com/html/4/element/script.html"><span class="kw2">script</span></a> <span class="kw3">type</span><span class="sy0">=</span><span class="st0">&quot;text/javascript&quot;</span> <span class="kw3">src</span><span class="sy0">=</span><span class="st0">&quot;http://chanpin.xm12t.com.cn/js/preview.js&quot;</span> data-jsonfile<span class="sy0">=</span><span class="st0">&quot;index.json&quot;</span>&gt;&lt;<span class="sy0">/</span><a target="_blank" href="http://december.com/html/4/element/script.html"><span class="kw2">script</span></a>&gt;</span>
		<span class="sc-1">&lt;!-- 调试代码 End --&gt;</span></pre>

</div>
<!-- EDIT18 SECTION "针对性修改" [5267-] -->